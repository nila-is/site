---
import { Image } from 'astro:assets';
import logo from '../assets/logo.svg';
---
<header class="bg-background border-b border-border transition-colors duration-300" role="banner">
  <nav class="max-w-2xl mx-auto px-6 py-8" aria-label="Main navigation">
    <div class="flex items-center justify-center text-foreground">
      <button 
        id="theme-toggle"
        type="button"
        class="cursor-pointer rounded-full p-1 -ml-1 transition-all duration-300 hover:scale-110 hover:drop-shadow-[0_0_16px_hsl(var(--primary)/0.5)] active:scale-100"
        aria-label="Toggle dark mode"
      >
        <Image 
          id="logo-image"
          src={logo} 
          alt="" 
          role="presentation" 
          class="w-8 h-8 mr-3 dark:invert transition-all duration-300" 
        />
      </button>
      <span class="font-sans font-bold text-2xl m-0 uppercase tracking-wider">Nila</span>
      <span class="ml-3 text-sm normal-case tracking-normal font-normal text-muted-foreground transition-colors">by Vignesh Mohankumar</span>
    </div>
  </nav>
</header>

<script>
  // Theme toggle functionality
  function initThemeToggle() {
    const themeToggle = document.getElementById('theme-toggle');
    const logoImage = document.getElementById('logo-image');
    
    if (!themeToggle || !logoImage) return;
    
    themeToggle.addEventListener('click', () => {
      const html = document.documentElement;
      const currentTheme = html.classList.contains('dark') ? 'dark' : 'light';
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      
      // Add animation to logo
      logoImage.classList.add('animate-theme-spin');
      
      // Toggle theme
      html.classList.toggle('dark');
      localStorage.setItem('theme', newTheme);
      
      // Remove animation class after animation completes
      setTimeout(() => {
        logoImage.classList.remove('animate-theme-spin');
      }, 600);
    });
  }
  
  // Initialize on page load
  initThemeToggle();
  
  // Re-initialize after navigation (for SPA-like behavior)
  document.addEventListener('astro:after-swap', initThemeToggle);
</script>
