---
import { Image } from 'astro:assets';
import logo from '../assets/logo.svg';
---

<header class="bg-background px-6 pb-8 pt-12">
  <div class="mx-auto max-w-2xl">
    <div class="flex items-center">
      <button
        id="theme-toggle"
        type="button"
        class="-ml-1 cursor-pointer rounded-full p-1 transition-all duration-300 hover:scale-110 hover:[filter:drop-shadow(0_0_24px_rgba(60,100,180,0.4))] active:scale-100 dark:hover:[filter:drop-shadow(0_0_24px_rgba(200,220,240,0.6))]"
        aria-label="Toggle dark mode"
      >
        <Image
          id="logo-image"
          src={logo}
          alt="Nila Logo"
          class="h-8 w-8 transition-all duration-300 dark:invert"
        />
      </button>
      <span class="ml-2.5 font-sans text-xl font-bold tracking-wide">
        NILA
      </span>
    </div>
  </div>
</header>

<script>
  function initThemeToggle() {
    const themeToggle = document.getElementById('theme-toggle');
    if (!themeToggle) return;

    themeToggle.addEventListener('click', () => {
      const html = document.documentElement;
      const currentTheme = html.classList.contains('dark') ? 'dark' : 'light';
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

      html.classList.toggle('dark');
      localStorage.setItem('theme', newTheme);
    });
  }

  initThemeToggle();
  document.addEventListener('astro:after-swap', initThemeToggle);
</script>
