---
import ExternalLink from './ExternalLink.astro';

interface Props {
  quote: string;
  author: string;
  role: string;
  company: string;
  url: string;
  projectUrl?: string;
  projectLabel?: string;
  favicon?: string;
}

const { quote, author, role, company, url, projectUrl, projectLabel, favicon } = Astro.props;
---

<figure class="space-y-2 p-5 border border-border rounded-lg hover:border-border-hover hover:shadow-sm transition-all duration-200 focus-within:ring-2 focus-within:ring-primary-600 focus-within:ring-offset-2" aria-label={`Testimonial from ${author}, ${role} at ${company}`}>
  <blockquote cite={url}>
    <p class="italic text-content-subtle leading-relaxed text-sm">&ldquo;{quote}&rdquo;</p>
  </blockquote>
  <figcaption class="text-xs text-content-secondary">
    <div>
      <span class="font-medium">{author}</span>, {role} at <ExternalLink href={url}>{favicon && <img src={favicon} alt="" role="presentation" loading="lazy" decoding="async" class="w-3.5 h-3.5 inline align-text-bottom ml-0.5 mr-1" />}{company}</ExternalLink>
    </div>
    {projectUrl && projectLabel && (
      <span class="block mt-1">
        <ExternalLink href={projectUrl}>{projectLabel} â†’</ExternalLink>
      </span>
    )}
  </figcaption>
</figure>