---
import Layout from '../../layouts/Layout.astro';
import BlogPostCard from '../../components/BlogPostCard.astro';

const posts = Object.values(await import.meta.glob('./*.md', { eager: true }))
  .sort((a, b) => new Date(b.frontmatter.pubDate).getTime() - new Date(a.frontmatter.pubDate).getTime());
---

<Layout title="Blog">
  <div>
    <div class="flex justify-between items-center mb-8">
      <h1 class="text-xl font-bold">Blog Posts</h1>
      <a href="/rss.xml" class="text-xs text-blue-500 hover:underline" target="_blank" rel="noopener noreferrer">
        RSS Feed
      </a>
    </div>
    <div class="space-y-8">
      {posts.map((post) => (
        <BlogPostCard 
          title={post.frontmatter.title}
          url={post.url}
          pubDate={post.frontmatter.pubDate}
          description={post.frontmatter.description}
        />
      ))}
    </div>
  </div>
</Layout>
